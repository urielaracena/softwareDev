<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Card Scrollspy with Carousel</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <h1 class="title text-center">Scrollspy</h1>
  <section class="scrollspyctnr container py-3 rounded">
      <h2 class="text-center mb-4">Popular Japanese Dishes</h2>
      
      <div class="row">
          <!-- Desktop Navigation -->
          <div class="col-lg-3 d-none d-lg-block">
              <div id="list" class="list-group sticky-top" style="top: 20px;">
                  <a class="list-group-item list-group-item-action active" href="#list-item-1">Sushi</a>
                  <a class="list-group-item list-group-item-action" href="#list-item-2">Ramen</a>
                  <a class="list-group-item list-group-item-action" href="#list-item-3">Unagi</a>
                  <a class="list-group-item list-group-item-action" href="#list-item-4">Yakitori</a>
                  <a class="list-group-item list-group-item-action" href="#list-item-5">Okonomiyaki</a>
                  <a class="list-group-item list-group-item-action" href="#list-item-6">Katsu Curry</a>
              </div>
          </div>
  
          <!-- Mobile Carousel Navigation -->
          <div class="col-12 d-lg-none mb-3">
              <div class="carousel-nav">
                  <button class="btn btn-sm btn-outline-dark carousel-prev">
                      <span>&laquo; Prev</span>
                  </button>
                  <div class="carousel-indicators">
                      <span class="indicator active" data-target="#list-item-1"></span>
                      <span class="indicator" data-target="#list-item-2"></span>
                      <span class="indicator" data-target="#list-item-3"></span>
                      <span class="indicator" data-target="#list-item-4"></span>
                      <span class="indicator" data-target="#list-item-5"></span>
                      <span class="indicator" data-target="#list-item-6"></span>
                  </div>
                  <button class="btn btn-sm btn-outline-dark carousel-next">
                      <span>Next &raquo;</span>
                  </button>
              </div>
          </div>
  
          <!-- Content Area -->
          <div class="col-lg-9">
              <div data-bs-spy="scroll" data-bs-target="#list" data-bs-smooth-scroll="true" class="scrollspy carousel-container" tabindex="0">
                  <!-- Sushi Card -->
                  <div class="card food-card mb-4" id="list-item-1">
                      <div class="card-header bg-primary text-white">
                          <h4 class="mb-0">Sushi</h4>
                      </div>
                      <div class="card-body">
                          <img class="img-thumbnail mb-3 uniform-thumb" src="images/sushi.jpg" alt="Sushi plate with various nigiri and rolls">
                          <p>A dish of vinegared rice combined with fresh raw fish, seafood, or vegetables. The rice is seasoned with rice vinegar, sugar, and salt, then topped or filled with ingredients like tuna, salmon, yellowtail, shrimp, or cucumber. Sushi has a delicate balance of flavors - slightly tart rice complementing the fresh fish, enhanced by small amounts of wasabi (spicy green paste), soy sauce, and pickled ginger. Common types include nigiri (hand-pressed rice topped with fish), maki (rice and fillings rolled in seaweed), and sashimi (just the raw fish, technically not sushi).</p>
                      </div>
                  </div>
                  
                  <!-- Ramen Card -->
                  <div class="card food-card mb-4" id="list-item-2">
                      <div class="card-header bg-primary text-white">
                          <h4 class="mb-0">Ramen</h4>
                      </div>
                      <div class="card-body">
                          <img class="img-thumbnail mb-3 uniform-thumb" src="images/ramen.jpg" alt="Bowl of ramen with broth, noodles and toppings">
                          <p>A noodle soup dish featuring wheat noodles served in a meat-based broth, flavored with soy sauce or miso, and topped with ingredients like sliced pork (chashu), dried seaweed (nori), green onions, and soft-boiled eggs. The broth varieties include shoyu (soy sauce), miso (fermented soybean paste), shio (salt), and tonkotsu (pork bone). Tonkotsu broth is simmered for hours, resulting in a rich, creamy texture. The noodles range from thin and straight to thick and wavy. Ramen offers a complex, umami-rich taste with savory broth, chewy noodles, and tender toppings creating a satisfying meal experience.</p>
                      </div>
                  </div>
                  
                  <!-- Unagi Card -->
                  <div class="card food-card mb-4" id="list-item-3">
                      <div class="card-header bg-primary text-white">
                          <h4 class="mb-0">Unagi</h4>
                      </div>
                      <div class="card-body">
                          <img class="img-thumbnail mb-3 uniform-thumb" src="images/unagi.jpg" alt="Grilled unagi eel on rice">
                          <p>A traditional delicacy of freshwater eel grilled with a sweet soy-based sauce and typically served over rice. The eel is first split down the back, gutted, boned, and filleted before being skewered and grilled. During cooking, it's repeatedly brushed with tare sauce (a thick, sweet glaze made from soy sauce, mirin, sake, and sugar) in a technique called "kabayaki." This results in a caramelized exterior with a rich, smoky-sweet flavor. The meat has a distinctive tender texture that's fatty and moist. When served as unaju or unadon, it comes on a bed of steamed rice in a lacquered box or bowl, often garnished with sansho pepper, which adds a citrusy, numbing quality that cuts through the richness. Unagi has been prized in Japan for centuries both for its flavor and its supposed stamina-enhancing properties, traditionally eaten during hot summer months.</p>
                      </div>
                  </div>
                  
                  <!-- Yakitori Card -->
                  <div class="card food-card mb-4" id="list-item-4">
                      <div class="card-header bg-primary text-white">
                          <h4 class="mb-0">Yakitori</h4>
                      </div>
                      <div class="card-body">
                          <img class="img-thumbnail mb-3 uniform-thumb" src="images/yakitori.jpg" alt="Grilled yakitori chicken skewers">
                          <p>Skewered chicken pieces grilled over charcoal. Different parts of the chicken are used including breast, thigh, skin, liver, heart, and cartilage, each offering distinct textures and flavors. The meat is cut into bite-sized pieces, skewered on bamboo sticks, and grilled over binchotan (white charcoal). Yakitori is typically seasoned either with tare (a sweet-savory glaze made from soy sauce, mirin, sake, and sugar) or simply with salt (shio). The result is juicy, tender chicken with a smoky char and caramelized exterior. The tare-seasoned varieties have a rich, umami sweetness while salt-seasoned ones highlight the natural chicken flavor.</p>
                      </div>
                  </div>
                  
                  <!-- Okonomiyaki Card -->
                  <div class="card food-card mb-4" id="list-item-5">
                      <div class="card-header bg-primary text-white">
                          <h4 class="mb-0">Okonomiyaki</h4>
                      </div>
                      <div class="card-body">
                          <img class="img-thumbnail mb-3 uniform-thumb" src="images/okonomiyaki.jpg" alt="Okonomiyaki pancake topped with sauce and bonito flakes">
                          <p>A savory pancake containing a variety of ingredients in a wheat-flour-based batter. The batter includes grated nagaimo (mountain yam), dashi, eggs, and shredded cabbage, mixed with ingredients like thinly sliced pork belly, octopus, squid, shrimp, or cheese. In Osaka style, all ingredients are mixed together before cooking, while Hiroshima style layers the ingredients with fried noodles. The batter is poured onto a hot griddle and cooked on both sides until golden brown. Okonomiyaki is topped with a sweet-savory sauce similar to Worcestershire sauce, Japanese mayonnaise, dried seaweed flakes, and dancing bonito flakes (dried fish flakes). It has a savory, umami taste with a fluffy interior and slightly crisp exterior.</p>
                      </div>
                  </div>
                  
                  <!-- Katsu Curry Card -->
                  <div class="card food-card mb-4" id="list-item-6">
                      <div class="card-header bg-primary text-white">
                          <h4 class="mb-0">Katsu Curry</h4>
                      </div>
                      <div class="card-body">
                          <img class="img-thumbnail mb-3 uniform-thumb" src="images/katsu-curry.jpg" alt="Katsu curry with rice and breaded cutlet">
                          <p>A dish combining crispy breaded cutlet with Japanese curry sauce, served over rice. The katsu is typically a pork cutlet (tonkatsu) or chicken breast, pounded thin, seasoned with salt and pepper, coated in flour, beaten egg, and panko breadcrumbs, then deep-fried until golden and crunchy. The curry sauce contains onions, carrots, potatoes, and sometimes apples, cooked with curry powder or roux blocks (containing curry powder, flour, and fat), then simmered until thick. Japanese curry is milder and sweeter than Indian curries, with a thick, gravy-like consistency. The dish offers contrasting textures of crunchy cutlet, smooth curry, and fluffy rice, with a flavor profile that's savory, slightly sweet with subtle spices rather than heat.</p>
                      </div>
                  </div>
              </div>
          </div>
      </div>
  </section>
  
  <style>
  /* Card styling */
  .food-card {
      transition: transform 0.3s, box-shadow 0.3s;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
  }
  
  .food-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 15px rgba(0,0,0,0.1);
  }
  
  .food-card .card-header {
      border-bottom: none;
  }
  
  .uniform-thumb {
      width: 100%;
      height: 200px;
      object-fit: cover;
      border-radius: 4px;
  }
  
  /* Carousel styling for mobile */
  @media (max-width: 991px) {
      .carousel-container {
          display: flex;
          overflow-x: hidden;
          scroll-behavior: smooth;
          scroll-snap-type: x mandatory;
          -webkit-overflow-scrolling: touch;
          max-height: calc(100vh - 150px);
          overflow-y: auto;
      }
      
      .food-card {
          flex: 0 0 100%;
          scroll-snap-align: start;
          margin-right: 1rem;
          width: 100%;
      }
      
      .carousel-nav {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 1rem;
      }
      
      .carousel-indicators {
          display: flex;
          justify-content: center;
          gap: 8px;
      }
      
      .indicator {
          width: 12px;
          height: 12px;
          background-color: #dee2e6;
          border-radius: 50%;
          cursor: pointer;
          transition: background-color 0.3s;
      }
      
      .indicator.active {
          background-color: #0d6efd;
      }
  }
  
  /* Desktop styling */
  @media (min-width: 992px) {
      .carousel-nav {
          display: none;
      }
      
      .scrollspy {
          height: auto;
          overflow-y: visible;
      }
  }
  </style>
  
  <script>
  document.addEventListener('DOMContentLoaded', function() {
      // Variables
      const carouselContainer = document.querySelector('.carousel-container');
      const cards = document.querySelectorAll('.food-card');
      const prevBtn = document.querySelector('.carousel-prev');
      const nextBtn = document.querySelector('.carousel-next');
      const indicators = document.querySelectorAll('.indicator');
      let currentIndex = 0;
      
      // Check if we're in mobile view
      function isMobileView() {
          return window.innerWidth < 992;
      }
      
      // Initialize the carousel
      function initializeCarousel() {
          if (isMobileView()) {
              // Set initial position
              scrollToCard(currentIndex, false);
              
              // Update indicator states
              updateIndicators();
          }
      }
      
      // Scroll to specific card
      function scrollToCard(index, smooth = true) {
          if (!isMobileView()) return;
          
          const card = cards[index];
          if (!card) return;
          
          const scrollOptions = {
              left: card.offsetLeft,
              behavior: smooth ? 'smooth' : 'auto'
          };
          
          carouselContainer.scrollTo(scrollOptions);
          currentIndex = index;
          updateIndicators();
      }
      
      // Update indicators
      function updateIndicators() {
          indicators.forEach((indicator, index) => {
              indicator.classList.toggle('active', index === currentIndex);
          });
      }
      
      // Next button handler
      if (prevBtn) {
          prevBtn.addEventListener('click', function() {
              const newIndex = Math.max(0, currentIndex - 1);
              scrollToCard(newIndex);
          });
      }
      
      // Previous button handler
      if (nextBtn) {
          nextBtn.addEventListener('click', function() {
              const newIndex = Math.min(cards.length - 1, currentIndex + 1);
              scrollToCard(newIndex);
          });
      }
      
      // Indicator click handlers
      indicators.forEach((indicator, index) => {
          indicator.addEventListener('click', function() {
              scrollToCard(index);
          });
      });
      
      // Handle resize events
      window.addEventListener('resize', function() {
          if (isMobileView()) {
              initializeCarousel();
          }
      });
      
      // Handle scroll events to update indicators
      carouselContainer.addEventListener('scroll', function() {
          if (!isMobileView()) return;
          
          const scrollPosition = carouselContainer.scrollLeft;
          
          cards.forEach((card, index) => {
              const cardLeft = card.offsetLeft;
              const cardWidth = card.offsetWidth;
              const cardMidpoint = cardLeft + cardWidth / 2;
              
              // If the scrollPosition is closest to this card's midpoint
              if (Math.abs(scrollPosition - cardLeft) < cardWidth / 2) {
                  currentIndex = index;
                  updateIndicators();
              }
          });
      });
      
      // Handle scrollspy for desktop
      const listItems = document.querySelectorAll('#list a');
      window.addEventListener('scroll', function() {
          if (isMobileView()) return;
          
          const scrollPosition = window.scrollY;
          
          cards.forEach((card, index) => {
              const cardTop = card.getBoundingClientRect().top + window.scrollY;
              const cardHeight = card.offsetHeight;
              
              if (scrollPosition >= cardTop - 100 && 
                  scrollPosition < cardTop + cardHeight - 100) {
                  listItems.forEach(item => item.classList.remove('active'));
                  listItems[index].classList.add('active');
              }
          });
      });
      
      // Initialize
      initializeCarousel();
  });
  </script>
</body>
</html>
